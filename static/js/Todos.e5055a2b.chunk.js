(this["webpackJsonpgeri-react"]=this["webpackJsonpgeri-react"]||[]).push([[19],{220:function(e,t,n){"use strict";n.r(t);var c=n(21),o=n(30),r=n(0),a=n.n(r),i=n(16),s=n(214),l=n(206),u=n(3),d=Object(i.a)({formWrap:{display:"flex",flexDirection:"column"},form:{display:"flex",flexDirection:"column"},checkboxWrap:{paddingTop:20},checkbox:{margin:{left:10,right:3}},buttonsWrap:{display:"flex",justifyContent:"space-between",padding:20}}),b=function(e){var t=e.onSubmit,n=Object(r.useState)(!1),c=Object(o.a)(n,2),a=c[0],i=c[1],b=Object(r.useState)(""),j=Object(o.a)(b,2),h=j[0],f=j[1],p=Object(r.useState)("low"),x=Object(o.a)(p,2),O=x[0],m=x[1],g=d(),v=function(){i((function(e){return!e})),f(""),m("low")},y=function(e){return m(e.target.value)};return Object(u.jsx)("div",{className:g.formWrap,children:a?Object(u.jsxs)("form",{className:g.form,onSubmit:function(e){if(e.preventDefault(),h){var n={date:Date.now(),isDone:!1,value:h,urgency:O};t(n),f(""),m("low"),i(!1)}},children:[Object(u.jsx)(s.a,{label:"Enter todo",value:h,onChange:function(e){return f(e.target.value)}}),Object(u.jsxs)("div",{className:g.checkboxWrap,children:[Object(u.jsx)("span",{children:"Urgency:"}),Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{className:g.checkbox,type:"radio",value:"low",checked:"low"===O,onChange:y}),Object(u.jsx)("span",{children:"Low"})]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{className:g.checkbox,type:"radio",value:"medium",checked:"medium"===O,onChange:y}),Object(u.jsx)("span",{children:"Medium"})]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{className:g.checkbox,type:"radio",value:"high",checked:"high"===O,onChange:y}),Object(u.jsx)("span",{children:"High"})]})]}),Object(u.jsxs)("div",{className:g.buttonsWrap,children:[Object(u.jsx)(l.a,{color:"primary",onClick:v,children:"Cancel"}),Object(u.jsx)(l.a,{variant:"contained",color:"primary",type:"submit",children:"Add todo"})]})]}):Object(u.jsx)(l.a,{variant:"contained",color:"primary",onClick:v,children:"+ Add todo"})})},j=n(159),h=n.n(j),f=n(207),p=n(208),x=n(209),O=n(210),m=n(211),g=n(212),v=n(229),y=n(213),C=n(97),k=n.n(C),D=Object(f.a)({todosItem:{marginBottom:10,backgroundColor:"#eeeeff"}}),_=function(e){var t=e.todo,n=t.id,c=t.date,o=t.value,r=t.urgency,a=t.isDone,i=e.onToggle,s=e.onDelete,l=h()(c).format("DD/MM/YYYY hh:mm:ss"),d=D().todosItem;return console.log("render",n),Object(u.jsx)(p.a,{className:d,children:Object(u.jsxs)(x.a,{children:[Object(u.jsxs)(O.a,{children:[Object(u.jsx)("p",{children:o}),Object(u.jsx)("p",{children:r}),Object(u.jsx)("p",{children:l})]}),Object(u.jsx)(m.a,{}),Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v.a,{checked:a,onChange:function(){return i(n)},color:"primary",inputProps:{"aria-label":"secondary checkbox"}}),Object(u.jsx)(y.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return s(n)},children:Object(u.jsx)(k.a,{})})]})]})})},w=function(e,t){return e.todo.isDone===t.todo.isDone},S=a.a.memo(_,w),N=function(e){var t=e.todos,n=e.onDelete,c=e.onToggle;return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsx)(S,{todo:e,onDelete:n,onToggle:c},e.id)}))})},T=n(162),W=n.n(T),R=n(15),A=Object(i.a)({modal__backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)"},modal__title:{margin:0},modal__content:{position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:12,minHeight:300,minWidth:600,transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:3,boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12)"},modal__btn:{padding:{top:10,left:20,right:20,bottom:10},margin:10,fontSize:16,textTransform:"uppercase",cursor:"pointer",color:"white",backgroundColor:"teal",border:"none",borderRadius:4,outline:"none","&:hover":{backgroundColor:"tomato"}}}),M=document.querySelector("#todoModal-root"),Y=function(e){var t=e.onOk,n=e.onCancel,c=e.text,o=A();return Object(R.createPortal)(Object(u.jsx)("div",{className:o.modal__backdrop,children:Object(u.jsxs)("div",{className:o.modal__content,children:[Object(u.jsxs)("h2",{className:o.modal__title,children:["Delete Todo ",c]}),Object(u.jsxs)("p",{children:["Do you really want to delete todo ",c,"?"]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:o.modal__btn,type:"button",onClick:n,children:"Cancel"}),Object(u.jsx)("button",{className:o.modal__btn,type:"button",onClick:t,children:"Ok"})]})]})}),M)},I=n(84),J=n.n(I);J.a.defaults.baseURL="http://localhost:2221";var z=n(33);t.default=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),s=Object(o.a)(i,2),l=s[0],d=s[1],j=Object(r.useState)(!1),h=Object(o.a)(j,2),f=h[0],p=h[1],x=Object(r.useState)(""),O=Object(o.a)(x,2),m=O[0],g=O[1];return Object(r.useEffect)((function(){a(!0),J.a.get("/todos").then((function(e){return e.data})).then((function(e){return d(e)})).then((function(){return Object(z.b)("All data received from the db.json",{type:"success",autoClose:2e3})})).catch((function(e){return Object(z.b)(e.message,{type:"error",autoClose:2e3})})).finally((function(){return a(!1)}))}),[]),Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)("h1",{children:"Todos"}),Object(u.jsx)(W.a,{color:"teal",loading:n,size:25,margin:5}),!n&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{onSubmit:function(e){var t;l.find((function(t){return t.value===e.vlue}))||(t=e,J.a.post("/todos",t).then((function(e){return e.data}))).then((function(e){return d((function(t){return[e].concat(Object(c.a)(t))}))})).then((function(){return Object(z.b)("A new todo has been added to the state",{type:"success",autoClose:2e3})})).catch((function(e){return Object(z.b)(e.message,{type:"error",autoClose:2e3})}))}}),Object(u.jsx)(N,{todos:l,onDelete:function(e){g(l.find((function(t){return t.id===e}))),p(!0)},onToggle:function(e){var t=l.find((function(t){return t.id===e}));(function(e,t){return J.a.patch("/todos/".concat(e),t).then((function(e){return e.data}))})(e,{isDone:!t.isDone}).then((function(e){return d((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))})).then((function(){return Object(z.b)("".concat(m.value," successfully updated"),{type:"success",autoClose:2e3})})).catch((function(e){return Object(z.b)(e.message,{type:"error",autoClose:2e3})}))}})]}),f&&Object(u.jsx)(Y,{text:m.value,onOk:function(){var e;p(!1),(e=m.id,J.a.delete("/todos/".concat(e)).then((function(){return e}))).then((function(e){return d((function(t){return t.filter((function(t){return t.id!==e}))}))})).then((function(){return Object(z.b)("".concat(m.value," successfully deleted"),{type:"success",autoClose:2e3})})).catch((function(e){return Object(z.b)(e.message,{type:"error",autoClose:2e3})}))},onCancel:function(){return p(!1)}}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"use JSON Server 2221"}),Object(u.jsx)("li",{children:"use React Spinners"}),Object(u.jsx)("li",{children:"use React-Toastify"}),Object(u.jsx)("li",{children:"use axios"})]})]})}}}]);
//# sourceMappingURL=Todos.e5055a2b.chunk.js.map